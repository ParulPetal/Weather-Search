function agknTagBuilder(){function n(n){if(/[^0-9-\s]+/.test(n))return!1;n=n.replace(/\D/g,"");var t=!1;if(S.forEach(function(e){!t&&e.regexp.test(n)&&(t=!0)}),!t)return!1;for(var e=0,r=0,i=!1,o=n.length-1;o>=0;o--){var a=n.charAt(o),r=parseInt(a,10);i&&(r*=2)>9&&(r-=9),e+=r,i=!i}return e%10==0}function t(n){var t,o,a,c,s,u,f=Object.create(null);if(this[L]=f,n)if("string"==typeof n)for("?"===n.charAt(0)&&(n=n.slice(1)),c=n.split("&"),s=0,u=c.length;s<u;s++)a=c[s],t=a.indexOf("="),-1<t?r(f,i(a.slice(0,t)),i(a.slice(t+1))):a.length&&r(f,i(a),"");else if(M(n))for(s=0,u=n.length;s<u;s++)a=n[s],r(f,a[0],a[1]);else if(n.forEach)n.forEach(e,f);else for(o in n)r(f,o,n[o])}function e(n,t){r(this,t,n)}function r(n,t,e){var r=M(e)?e.join(","):e;t in n?n[t].push(r):n[t]=[r]}function i(n){return decodeURIComponent(n.replace(D," "))}function o(n){return encodeURIComponent(n).replace(q,K)}var a,c="-1",s="-1",u="-1",f="-1",d="-1",g="-1",h="-1",l="",p="",m=1,w=1,v="iframe",y={},T=null,b=null,A=0,_=this,k=["password","pw","userid","uid","ssn","phone","mobile","email","login","username","birthday","birthdate","dob","firstname","first_name","lastname","last_name","name"],x=/^(\d{1})?[- ]?\(?(\d{3})\)?[- ]?(\d{3})[- ]?(\d{4})$/,E=/^(\d{3})[- ]?(\d{2})[- ]?(\d{4})$/,$=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/,S=[{regexp:/^(401178|401179|431274|438935|451416|457393|457631|457632|504175|627780|636297|636368|(506699|5067[0-6]\d|50677[0-8])|(50900\d|5090[1-9]\d|509[1-9]\d{2})|65003[1-3]|(65003[5-9]|65004\d|65005[0-1])|(65040[5-9]|6504[1-3]\d)|(65048[5-9]|65049\d|6505[0-2]\d|65053[0-8])|(65054[1-9]|6505[5-8]\d|65059[0-8])|(65070\d|65071[0-8])|65072[0-7]|(65090[1-9]|65091\d|650920)|(65165[2-9]|6516[6-7]\d)|(65500\d|65501\d)|(65502[1-9]|6550[3-4]\d|65505[0-8]))[0-9]{10,12}/},{regexp:/^3(?:0[0-5]|[68][0-9])[0-9]{11}$/},{regexp:/^6(?:011|5[0-9]{2}|4[4-9][0-9]{1}|(22(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[01][0-9]|92[0-5]$)[0-9]{10}$))[0-9]{12}$/},{regexp:/^(38[0-9]{17}|60[0-9]{14})$/},{regexp:/^3[47][0-9]{13}$/},{regexp:/^50[0-9]{14,17}$/},{regexp:/^(5[1-5][0-9]{14}|2221[0-9]{12}|222[2-9][0-9]{12}|22[3-9][0-9]{13}|2[3-6][0-9]{14}|27[01][0-9]{13}|2720[0-9]{12})$/},{regexp:/^4[0-9]{12}(?:[0-9]{3})?$/}],C=function(t,e){if(e){var r=e.trim();if(k.indexOf(t)>=0||$.test(r)||x.test(r)||E.test(r)||n(r)){for(var i="",o=0;o<e.length;o++)i+="x";e=i}}return e},N=function(n){return String(n).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},U=function(n){var t="{";t+=B("bpid",c),t+=","+B("loc",T),b||(b="-1"),t+=","+B("ref",b),t+=","+B("cid",g),t+=","+B("sid",d),t+=","+B("gen",s),t+=","+B("age",u),t+=","+B("cat",f),t+=","+B("brd",h);for(var e in y){var r=B(e,y[e]);a(r).length+n+a(t).length<2e3&&(t+=","+r)}return t+="}"},B=function(n,t){return t=C(n,t),'"'+n+'":"'+t+'"'},O=function(){var n="http"+("https:"==window.location.protocol?"s":"")+"://",t="/"+v+"/8613/",e=n+"d.agkn.com"+t+"?che="+Math.floor(1e9*Math.random())+("1"===l?"&gdpr="+l+"&gdpr_consent="+p:"")+"&url="+a(T)+"&bpid="+c+"&c=";return e+=a(U(e.length)),e.length>=2e3&&(e="%"==e.charAt(1998)?e.substr(0,1998):"%"==e.charAt(1999)?e.substr(0,1999):e.substr(0,2e3),"%"==e.charAt(e.length-3)&&"2"==e.charAt(e.length-2)&&"5"==e.charAt(e.length-1)&&(e=e.substr(0,e.length-3))),e},R=function(n){if(n){var e=n.indexOf("?");if(e>0){var r=new t(n.substring(e));if(r){var i=0;if(r.forEach(function(n,t){null!=r.get(t)&&(r.set(t,C(t,n)),i++)}),i)return n.split("?")[0]+"?"+r.toString()}}}return n},I=function(){var n,t,e=0,r=0;if(1==m)for(var i=window;;){try{n=i.document.location,t=i.document.referrer,e=r}catch(n){}if(i==window.top||i==i.parent)break;i=i.parent,r++}else n=window.document.location,t=window.document.referrer;A=r-e,b=t.toString(),b=R(b),0==A?(T=n.href,T=R(T)):T=b};if("function"==typeof encodeURIComponent)a=encodeURIComponent;else{var j=new RegExp('[\0- ]|["-&]|[+-,]|/|[:-@]|[[-^]|`|[{-}]|[-ï¿¿]',"g");a=function(n){return n.toString().replace(j,G)}}var F=function(n){var t=n.toString(16).toUpperCase();return t.length<2?"0"+t:t},G=function(n){var t=n.charCodeAt(0);return isNaN(t)?"":t<128?"%"+F(t):t<2048?"%"+F(192+(t>>6))+"%"+F(128+(63&t)):t<65536?"%"+F(224+(t>>12))+"%"+F(128+(t>>6&63))+"%"+F(128+(63&t)):"%"+F(240+(t>>18))+"%"+F(128+(t>>12&63))+"%"+F(128+(t>>6&63))+"%"+F(128+(63&t))},M=Array.isArray,P=t.prototype,q=/[!'\(\)~]|%20|%00/g,D=/\+/g,J={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"},K=function(n){return J[n]},L="__URLSearchParams__:"+Math.random();P.append=function(n,t){r(this[L],n,t)},P.delete=function(n){delete this[L][n]},P.get=function(n){var t=this[L];return n in t?t[n][0]:null},P.getAll=function(n){var t=this[L];return n in t?t[n].slice(0):[]},P.has=function(n){return n in this[L]},P.set=function(n,t){this[L][n]=[""+t]},P.forEach=function(n,t){var e=this[L];Object.getOwnPropertyNames(e).forEach(function(r){e[r].forEach(function(e){n.call(t,e,r,this)},this)},this)},P.toJSON=function(){return{}},P.toString=function(){var n,t,e,r,i=this[L],a=[];for(t in i)for(e=o(t),n=0,r=i[t];n<r.length;n++)a.push(e+"="+o(r[n]));return a.join("&")};var V=function(n,t,e){var r=window.document.createElement("iframe");return r.height=t||0,r.width=e||0,r.frameBorder=0,r.src=n,r.style.display="none",r},z=function(n){var t=window.document.createElement("img");return t.height=0,t.width=0,t.src=n,t.style.display="none",t},H=function(n){var t=null==window.document.body?window.document.getElementsByTagName("head")[0]:window.document.body;t.insertBefore(n,t.lastChild)};this.addEchoKeyValue=function(n,t){y[N(n)]=N(t)},this.setBpId=function(n){c=N(n)},this.setGen=function(n){s=N(n)},this.setAge=function(n){u=N(n)},this.setCat=function(n){f=N(n)},this.setSid=function(n){d=N(n)},this.setCid=function(n){g=N(n)},this.setBrd=function(n){h=N(n)},this.setGdpr=function(n){l=n},this.setGdprConsent=function(n){p=n},this.setFindParentFrame=function(n){m=n},this.setForceRetag=function(n){w=n},this.setTrimAnchor=function(n){n=n},this.generateTag=function(n){v="img"==n?"pixel":"iframe";var t;if(I(),!window._isAgknTagSet||1==w){if("function"==typeof setUpAgknTag)try{setUpAgknTag(_)}catch(n){}var e=O();t="img"==n?z(e):V(e,0,0),window._isAgknTagSet=1,H(t)}return t}}var _agknTag=new agknTagBuilder,_agknTagName="_agknEchoTag";window[_agknTagName]=_agknTag,window[_agknTagName]?window[_agknTagName].generateTag():generateTag();